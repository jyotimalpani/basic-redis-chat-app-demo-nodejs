version: '3.3'
services:
    chatapp:
        build:
            context: .
            dockerfile: Dockerfile
        container_name: chatapp-dev
        environment:
            REDIS_ENDPOINT_URL: "redis-host"
            REDIS_PASSWORD: "password"
        ports:
            - "0:8080"
        depends_on:
            - db
        networks:
            - custom_network
    redis:
        image: redis
        container_name: redis-dev
        hostname: redis-host
        environment:
            REDIS_ENDPOINT_URL: "localhost"
            REDIS_PASSWORD: "password"
        volumes:
            - "db_data:/var/lib/redis-volume"
        ports:
            - "6379:6379"
            - "63790:63790"
volumes:
    db_data:
networks:
    custom_network:
